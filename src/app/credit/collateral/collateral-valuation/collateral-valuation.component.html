<div class="panel panel-default">

    <div class="panel-heading">
        <div class="row">
            <div class="col-md-12">
                <h2 class="panel-title pull-left">
                    Collateral Valuation
                </h2>
                <div class="pull-right">
                    <button (click)="showCusotmerSearch=true" pButton type="button" label="Search For Collateral"
                        icon="fa-plus"></button>
                </div>
            </div>
        </div>
    </div>
</div>
<p-dialog [responsive]=true [(visible)]="showCusotmerSearch" id="ct-modal" modal="modal" showEffect="fade" width="900">
    <customer-search (customer)="getCustomerDetail($event)" [showPhoneNumberSearch]="false">
    </customer-search>
    <div class="panel-footer">
        <div class="row">
            <div class="col-md-12">
                <button type="button" (click)="showCusotmerSearch=false;" style="margin-right:5px"
                    class="btn btn-danger pull-right">Back</button>
            </div>
        </div>
    </div>
</p-dialog>

<!--------------------------------------------- Tab List ------------------------------------------->
<div class="panel-body coll-list">
    <p-tabView [activeIndex]="activeTabindex" (onChange)="onTabChange($event)">
        <p-tabPanel header="Registered Collaterals">
            <p-dataTable [value]="collateralList" [paginator]="true" [rows]="5">
                <p-column field="customerName" header="Customer Name" sortable="true" [filter]="true"
                    filterMatchMode="contains">
                </p-column>
                <p-column field="customerAccount" header="Customer Account" sortable="true" [filter]="true"
                    filterMatchMode="contains">
                </p-column>
                <p-column field="collateralCode" header="Collateral Code" sortable="true" [filter]="true"
                    filterMatchMode="contains">
                </p-column>
                <p-column field="collateralTypeName" header="Collateral Type" sortable="true" [filter]="true"
                    filterMatchMode="contains">
                </p-column>

                <p-column field="collateralValue" header="Collateral Value" sortable="true" [filter]="true"
                    filterMatchMode="contains" [style]="{'text-align':'right'}">
                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                        {{ d.collateralValue | number : '1.2' }}
                    </ng-template>
                </p-column>
                <p-column field="facilityAmount" header="Facility Amount" sortable="true" [filter]="true"
                    filterMatchMode="contains" [style]="{'text-align':'right'}">
                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                        {{ d.facilityAmount | number : '1.2' }}
                    </ng-template>
                </p-column>

                <p-column field="haircut" header="Hair Cut" sortable="true" [filter]="true" filterMatchMode="contains"
                    [style]="{'width':'100px'}">
                </p-column>
                <p-column field="collateralReleaseStatusName" header="Status" sortable="true" [filter]="true"
                    filterMatchMode="contains" [style]="{'width':'100px'}">
                </p-column>
                <p-column field="collateralUsageStatus" header="Usage Status" sortable="true" [filter]="true"
                    filterMatchMode="contains" [style]="{'width':'100px'}">
                </p-column>
                <p-column [style]="{'width':'120px'}">
                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                        <div style="text-align:center">
                            <a *ngIf="loanApplicationId == null && (d.collateralReleaseStatusId == 1 || d.collateralReleaseStatusId == null)"
                                (click)="viewValuationDetail(d)" href="javascript:void(0)">View Detail</a>

                        </div>
                    </ng-template>
                </p-column>

            </p-dataTable>
        </p-tabPanel>
        <p-tabPanel header="Collateral Detail">
            <!-- <div> -->
            <div class="panel-body">
                <div *ngIf="mainCollateralDetail != null" class="row" style="padding:0 15px 0 15px;">
                    <h6 *ngIf="collateralProperty"><strong>Collateral Information Registered for: </strong></h6>
                    <table *ngIf="mainCollateralDetail" class="table table-casa-information">
                        <tbody>
                            <tr>
                                <td>
                                    <strong>Customer Name:</strong>
                                </td>
                                <td colspan="1" style="text-align:left">{{customerName}}</td>
                                <td>
                                    <strong>Customer Code:</strong>
                                </td>
                                <td>{{customerCode}}</td>
                                <td>
                                    <strong>Date Created:</strong>
                                </td>
                                <td>{{ mainCollateralDetail.dateTimeCreated | date:"dd-MM-yyyy" }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Collateral Code:</strong>
                                </td>
                                <td>{{ mainCollateralDetail.collateralCode }}</td>
                                <td>
                                    <strong>Collateral Type:</strong>
                                </td>
                                <td>{{ mainCollateralDetail.collateralTypeName }}</td>
                                <td>
                                    <strong>Collateral Sub Type:</strong>
                                </td>
                                <td>{{ mainCollateralDetail.collateralSubTypeName }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Collateral Value:</strong>
                                </td>
                                <td>{{ mainCollateralDetail.collateralValue | number:'1.2'}}</td>
                                <td>
                                    <strong>currency:</strong>
                                </td>
                                <td>{{ mainCollateralDetail.currency }}</td>
                                <td>
                                    <strong>Haircut:</strong>
                                </td>
                                <td>{{ mainCollateralDetail.haircut }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Valuation Cycle:</strong>
                                </td>
                                <td>{{ mainCollateralDetail.valuationCycle }}</td>
                                <td>
                                    <strong></strong>
                                </td>
                                <td> </td>
                                <td>
                                    <strong></strong>
                                </td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="row" style="padding:0 15px 0 15px;">
                    <h6 *ngIf="mainCollateralView">Details:</h6>
                    <table *ngIf="collateralPromissory" class="table table-casa-information">
                        <tbody>
                            <tr>
                                <td>
                                    <strong>Effective Date:</strong>
                                </td>
                                <td>{{ customerCollateral?.promissoryEffectiveDate | date:"dd-MM-yyyy" }}</td>
                                <td>
                                    <strong>Maturity Date:</strong>
                                </td>
                                <td>{{ customerCollateral?.promissoryMaturityDate | date:"dd-MM-yyyy"}}</td>
                            </tr>
                            <tr>
                                <!-- <td>
                                            <strong>Promissory Value</strong>
                                        </td>
                                        <td>{{ customerCollateral?.promissoryValue | number:'1.2'}}</td> -->
                                <td>
                                    <strong>Promissory Note Number:</strong>
                                </td>
                                <td>{{ customerCollateral?.promissoryNoteRefferenceNumber }}</td>
                            </tr>
                        </tbody>
                    </table>

                    <table *ngIf="collateralProperty" class="table table-casa-information">
                        <tbody>

                            <tr>
                                <td>
                                    <strong>Description:</strong>
                                </td>
                                <td>{{ customerCollateral?.propertyName }}</td>
                                <td>
                                    <strong>Country:</strong>
                                </td>
                                <td>{{ customerCollateral?.countryName}}</td>

                                <td>
                                    <strong>Construction Date:</strong>
                                </td>
                                <td>{{ customerCollateral?.constructionDate | date:"dd-MM-yyyy" }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>State:</strong>
                                </td>
                                <td>{{ customerCollateral?.stateName }}</td>

                                <td>
                                    <strong>Local Government</strong>
                                </td>
                                <td>{{customerCollateral?.localGovtName}}</td>
                                <td>
                                    <strong>City/Location:</strong>
                                </td>
                                <td>{{ customerCollateral?.cityName }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Property Address</strong>
                                </td>
                                <td>{{customerCollateral?.propertyAddress}}</td>
                                <td>
                                    <strong>Date Of Acquisition</strong>
                                </td>
                                <td>{{customerCollateral?.dateOfAcquisition | date:"dd-MM-yyyy"}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Last Valuation Date:</strong>
                                </td>
                                <td>{{ customerCollateral?.lastValuationDate | date:"dd-MM-yyyy" }}</td>
                                <td>
                                    <strong>Valuer</strong>
                                </td>
                                <td>{{customerCollateral?.collateralValuer}}</td>
                                <td>
                                    <strong>Valuation Amount</strong>
                                </td>
                                <td>{{customerCollateral?.valuationAmount | number:'1.2'}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Property Base Type:</strong>
                                </td>
                                <td>{{ customerCollateral?.propertyBaseType }}</td>
                                <td>
                                    <strong>Open Market Value</strong>
                                </td>
                                <td>{{customerCollateral?.openMarketValue | number:'1.2'}}</td>
                                <td>
                                    <strong>Forced Sale Value</strong>
                                </td>
                                <td>{{customerCollateral?.forcedSaleValue | number:'1.2'}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Stamp To Cover:</strong>
                                </td>
                                <td>{{ customerCollateral?.stampToCover }}</td>
                                <td>
                                    <strong>Security Value</strong>
                                </td>
                                <td>{{customerCollateral?.securityValue | number:'1.2'}}</td>
                                <td>
                                    <strong>Perfection Status</strong>
                                </td>
                                <td>{{customerCollateral?.perfectionStatusName}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Reason for Non Perfection:</strong>
                                </td>
                                <td>{{ customerCollateral?.perfectionStatusReason }}</td>
                                <td>
                                    <strong>Is Owner Occupied?:</strong>
                                </td>
                                <td>{{ customerCollateral?.isOwnerOccupied }}</td>
                                <td>
                                    <strong>Is Property Residential?:</strong>
                                </td>
                                <td>{{ customerCollateral?.isResidential }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Is Asset Pledged By a Third Party ?:</strong>
                                </td>
                                <td>{{ customerCollateral?.isAssetPledgedByThirdParty ? 'Yes' : 'No' }}</td>
                                <td>
                                    <strong>Third Party Name:</strong>
                                </td>
                                <td>{{ customerCollateral?.thirdPartyName }}</td>

                            </tr>
                            <tr>
                                <td>
                                    <strong>Is Asset Managed By a Trustee ?:</strong>
                                </td>
                                <td>{{ customerCollateral?.isAssetManagedByTrustee ? 'Yes' : 'No' }}</td>
                                <td>
                                    <strong>Trustee Name:</strong>
                                </td>
                                <td>{{ customerCollateral?.trusteeName }}</td>
                                <td>
                                    <strong>Bank Share Of Collateral:</strong>
                                </td>
                                <td>{{ customerCollateral?.bankShareOfCollateral | number:'1.2' }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Remark:</strong>
                                </td>
                                <td>{{ customerCollateral?.remark }}</td>
                                <td>
                                    <strong></strong>
                                </td>
                                <td></td>
                                <td>
                                    <strong></strong>
                                </td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>

                    <table *ngIf="collateralMarketableSecurity" class="table table-casa-information">
                        <tbody>
                            <tr>
                                <td>
                                    <strong>Effective Date:</strong>
                                </td>
                                <td>{{ customerCollateral?.effectiveDate | date:"dd-MM-yyyy" }}</td>
                                <td>
                                    <strong>Maturity Date:</strong>
                                </td>
                                <td>{{ customerCollateral?.maturityDate | date:"dd-MM-yyyy" }}</td>
                                <td>
                                    <strong>Deal Amount:</strong>
                                </td>
                                <td>{{ customerCollateral?.dealAmount | number:'1.2' }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Security Value:</strong>
                                </td>
                                <td>{{ customerCollateral?.securityValue | number:'1.2' }}</td>
                                <td>
                                    <strong>Lien Usable Amount</strong>
                                </td>
                                <td>{{customerCollateral?.lienUsableAmount | number:'1.2'}}</td>
                                <td>
                                    <strong>Issuer Name</strong>
                                </td>
                                <td>{{customerCollateral?.issuerName}}</td>
                            </tr>
                            <tr>

                                <td>
                                    <strong>Unit Value:</strong>
                                </td>
                                <td>{{ customerCollateral?.unitValue | number:'1.2' }}</td>
                                <td>
                                    <strong>Number Of Units</strong>
                                </td>
                                <td>{{customerCollateral?.numberOfUnits}}</td>
                                <td>
                                    <strong>Rating</strong>
                                </td>
                                <td>{{customerCollateral?.rating}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Interest Payment Frequency:</strong>
                                </td>
                                <td>{{ customerCollateral?.unitValue | date:"dd-MM-yyyy"}}</td>
                                <td>
                                    <strong>Fund/Scheme</strong>
                                </td>
                                <td>{{customerCollateral?.fundName}}</td>
                                <td>
                                    <strong>Bank</strong>
                                </td>
                                <td>{{customerCollateral?.bank}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Remark:</strong>
                                </td>
                                <td>{{ customerCollateral?.remark }}</td>
                                <td>
                                    <strong></strong>
                                </td>
                                <td></td>
                                <td>
                                    <strong></strong>
                                </td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>

                    <table *ngIf="collateralGaurantee" class="table table-casa-information">
                        <tbody>
                            <!-- *ngIf="personal" -->
                            <tr>

                                <td>
                                    <strong>First Name:</strong>
                                </td>
                                <td>{{ customerCollateral?.firstName }}</td>
                                <td>
                                    <strong>Middle Name:</strong>
                                </td>
                                <td>{{ customerCollateral?.middleName}}</td>
                                <td>
                                    <strong>Last Name:</strong>
                                </td>
                                <td>{{ customerCollateral?.lastName }}</td>
                            </tr>
                            <tr>
                                <!-- *ngIf="corporate" -->
                                <td>
                                    <strong>BVN:</strong>
                                </td>
                                <td>{{ customerCollateral?.bvn }}</td>
                                <td>
                                    <strong>Name</strong>
                                </td>
                                <td>{{customerCollateral?.institutionName}}</td>
                                <td>
                                    <strong>RC Number</strong>
                                </td>
                                <td>{{customerCollateral?.rcNumber}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Phone Number 1:</strong>
                                </td>
                                <td>{{ customerCollateral?.phoneNumber1 }}</td>
                                <td>
                                    <strong>Phone Number 2</strong>
                                </td>
                                <td>{{customerCollateral?.phoneNumber2}}</td>
                                <td>
                                    <strong>Address</strong>
                                </td>
                                <td>{{customerCollateral?.guarantorAddress}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Tax Number:</strong>
                                </td>
                                <td>{{ customerCollateral?.taxNumber }}</td>
                                <td>
                                    <strong>Relationship</strong>
                                </td>
                                <td>{{customerCollateral?.relationship}}</td>
                                <td>
                                    <strong>Relationship Duration</strong>
                                </td>
                                <td>{{customerCollateral?.relationshipDuration}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Email Address:</strong>
                                </td>
                                <td>{{ customerCollateral?.emailAddress }}</td>
                                <td>
                                    <strong>Security Value</strong>
                                </td>
                                <td>{{customerCollateral?.guaranteeValue | number:'1.2'}}</td>
                                <td>
                                    <strong>Start Date</strong>
                                </td>
                                <td>{{customerCollateral?.cStartDate | date:"dd-MM-yyyy"}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>End Date:</strong>
                                </td>
                                <td>{{ customerCollateral?.endDate | date:"dd-MM-yyyy" }}</td>
                                <td>
                                    <strong>Remark</strong>
                                </td>
                                <td>{{customerCollateral?.remark}}</td>
                                <td>
                                    <strong></strong>
                                </td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>

                    <table *ngIf="collateralEquipment" class="table table-casa-information">
                        <tbody>
                            <tr>
                                <td>
                                    <strong>Description:</strong>
                                </td>
                                <td>{{ customerCollateral?.description }}</td>
                                <td>
                                    <strong>Machine Number:</strong>
                                </td>
                                <td>{{ customerCollateral?.machineNumber}}</td>
                                <td>
                                    <strong>Manufacturer Name:</strong>
                                </td>
                                <td>{{ customerCollateral?.manufacturerName }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Year Of Manufacture:</strong>
                                </td>
                                <td>{{ customerCollateral?.yearOfManufacture }}</td>
                                <td>
                                    <strong>Year Of Purchase</strong>
                                </td>
                                <td>{{customerCollateral?.yearOfPurchase}}</td>
                                <td>
                                    <strong>Value Base Type</strong>
                                </td>
                                <td>{{customerCollateral?.valueBaseTypeName}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Machine Condition:</strong>
                                </td>
                                <td>{{ customerCollateral?.machineCondition }}</td>
                                <td>
                                    <strong>Machine Location</strong>
                                </td>
                                <td>{{customerCollateral?.machineryLocation }}</td>
                                <td>
                                    <strong>Replacement Value</strong>
                                </td>
                                <td>{{customerCollateral?.replacementValue | number:'1.2'}}</td>
                            </tr>
                            <tr>

                                <td>
                                    <strong>Equipment Size:</strong>
                                </td>
                                <td>{{ customerCollateral?.equipmentSize }}</td>
                                <td>
                                    <strong>Intended Use</strong>
                                </td>
                                <td>{{customerCollateral?.intendedUse }}</td>
                                <td>
                                    <strong>Remark</strong>
                                </td>
                                <td>{{customerCollateral?.remark }}</td>
                            </tr>
                        </tbody>
                    </table>

                    <table *ngIf="collateralItemPolicy" class="table table-casa-information">
                        <tbody>
                            <tr>
                                <td>
                                    <strong>Insurance Type:</strong>
                                </td>
                                <td>{{ customerCollateral?.policyinsuranceType }}</td>
                                <td>
                                    <strong>Insurer Address:</strong>
                                </td>
                                <td>{{ customerCollateral?.insurerAddress}}</td>
                                <td>
                                    <strong>Policy Start Date:</strong>
                                </td>
                                <td>{{ customerCollateral?.policyStartDate | date:"dd-MM-yyyy" }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Assign Date:</strong>
                                </td>
                                <td>{{ customerCollateral?.assignDate | date:"dd-MM-yyyy" }}</td>
                                <td>
                                    <strong>Policy Renewal Date</strong>
                                </td>
                                <td>{{customerCollateral?.policyRenewalDate | date:"dd-MM-yyyy" }}</td>
                                <td>
                                    <strong>Policy Amount</strong>
                                </td>
                                <td>{{customerCollateral?.policyAmount | number:'1.2'}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Premium Amount:</strong>
                                </td>
                                <td>{{ customerCollateral?.premiumAmount | number:'1.2'}}</td>
                                <td>
                                    <strong>Renewal Frequency</strong>
                                </td>
                                <td>{{customerCollateral?.renewalFrequencyTypeName}}</td>
                                <td>
                                    <strong>Remark</strong>
                                </td>
                                <td>{{customerCollateral?.remark}}</td>
                            </tr>

                        </tbody>
                    </table>

                    <table *ngIf="collateralVehicle" class="table table-casa-information">
                        <tbody>
                            <tr>
                                <td>
                                    <strong>Vehicle Status:</strong>
                                </td>
                                <td>{{ customerCollateral?.vehicleStatus }}</td>
                                <td>
                                    <strong>Vehicle Make:</strong>
                                </td>
                                <td>{{ customerCollateral?.vehicleMake}}</td>
                                <td>
                                    <strong>Model Name:</strong>
                                </td>
                                <td>{{ customerCollateral?.modelName }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Manufactured Date:</strong>
                                </td>
                                <td>{{ customerCollateral?.manufacturedDate | date:"dd-MM-yyyy" }}</td>
                                <td>
                                    <strong>Registration Number</strong>
                                </td>
                                <td>{{customerCollateral?.registrationNumber}}</td>
                                <td>
                                    <strong>Serial Number</strong>
                                </td>
                                <td>{{customerCollateral?.serialNumber}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Chasis Number:</strong>
                                </td>
                                <td>{{ customerCollateral?.chasisNumber }}</td>
                                <td>
                                    <strong>Engine Number</strong>
                                </td>
                                <td>{{customerCollateral?.engineNumber}}</td>
                                <td>
                                    <strong>Name Of Owner:</strong>
                                </td>
                                <td>{{ customerCollateral?.nameOfOwner }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Registration Company</strong>
                                </td>
                                <td>{{customerCollateral?.registrationCompany}}</td>
                                <td>
                                    <strong>Resale Value</strong>
                                </td>
                                <td>{{customerCollateral?.resaleValue | number:'1.2'}}</td>
                                <td>
                                    <strong>Valuation Date:</strong>
                                </td>
                                <td>{{ customerCollateral?.valuationDate | date:"dd-MM-yyyy" }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Last Valuation Amount</strong>
                                </td>
                                <td>{{customerCollateral?.lastValuationAmount | number:'1.2'}}</td>
                                <td>
                                    <strong>Invoice Value</strong>
                                </td>
                                <td>{{customerCollateral?.invoiceValue | number:'1.2'}}</td>
                                <td>
                                    <strong>Remark:</strong>
                                </td>
                                <td>{{ customerCollateral?.remark }}</td>
                            </tr>

                        </tbody>
                    </table>

                    <table *ngIf="collateralPreciousMetal" class="table table-casa-information">
                        <tbody>
                            <tr>
                                <td>
                                    <strong>Precious Metal Name:</strong>
                                </td>
                                <td>{{ customerCollateral?.preciousMetalName }}</td>
                                <td>
                                    <strong>Weight In Grammes:</strong>
                                </td>
                                <td>{{ customerCollateral?.weightInGrammes}}</td>
                                <td>
                                    <strong>Valuation Amount:</strong>
                                </td>
                                <td>{{ customerCollateral?.metalValuationAmount | number:'1.2'}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Unit Rate:</strong>
                                </td>
                                <td>{{ customerCollateral?.metalUnitRate }}</td>
                                <td>
                                    <strong>Precious Metal Form</strong>
                                </td>
                                <td>{{customerCollateral?.preciousMetalFrm}}</td>
                                <td>
                                    <strong>Remark</strong>
                                </td>
                                <td>{{customerCollateral?.remark}}</td>
                            </tr>
                        </tbody>
                    </table>
                    <table *ngIf="collateralDeposit" class="table table-casa-information">
                        <tbody>

                            <tr>
                                <td>
                                    <strong>Account Name:</strong>
                                </td>
                                <td>{{ customerCollateral?.accountName }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Effective Date:</strong>
                                </td>
                                <td>{{ customerCollateral?.effectiveDate | date:"dd-MM-yyyy" }}</td>
                                <td>
                                    <strong>Maturity Date:</strong>
                                </td>
                                <td>{{ customerCollateral?.maturityDate | date:"dd-MM-yyyy" }}</td>
                                <td>
                                    <strong>Security Value:</strong>
                                </td>
                                <td>{{ customerCollateral?.securityValue | number:'1.2'}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Current Liened Amount:</strong>
                                </td>
                                <td>{{ customerCollateral?.lienAmount | number:'1.2'}}</td>
                                <td>
                                    <strong>Available Balance</strong>
                                </td>
                                <td>{{customerCollateral?.availableBalance | number:'1.2'}}</td>
                                <td>
                                    <strong>Bank</strong>
                                </td>
                                <td>{{customerCollateral?.bank}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Remark:</strong>
                                </td>
                                <td>{{ customerCollateral?.remark }}</td>
                                <td>
                                    <strong></strong>
                                </td>
                                <td></td>
                                <td>
                                    <strong></strong>
                                </td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>

                    <table *ngIf="collateralCasa" class="table table-casa-information">
                        <tbody>

                            <tr>
                                <td>
                                    <strong>Account Number:</strong>
                                </td>
                                <td>{{ customerCollateral?.accountNumber }}</td>
                                <td>
                                    <strong>Account Name:</strong>
                                </td>
                                <td>{{ customerCollateral?.accountName}}</td>
                                <td>
                                    <strong>Security Value:</strong>
                                </td>
                                <td>{{ customerCollateral?.securityValue | number:'1.2'}}</td>

                            </tr>
                            <tr>
                                <td>
                                    <strong>Current Liened Amount:</strong>
                                </td>
                                <td>{{ customerCollateral?.lienAmount | number:'1.2'}}</td>
                                <td>
                                    <strong>Available Balance:</strong>
                                </td>
                                <td>{{ customerCollateral?.availableBalance | number:'1.2'}}</td>
                                <td>
                                    <strong>Remark</strong>
                                </td>
                                <td>{{customerCollateral?.remark}}</td>
                            </tr>

                        </tbody>
                    </table>

                    <table *ngIf="collateralStock" class="table table-casa-information">
                        <tbody>

                            <tr>
                                <td>
                                    <strong>Share Quantity:</strong>
                                </td>
                                <td>{{ customerCollateral?.shareQuantity }}</td>
                                <td>
                                    <strong>Market Price:</strong>
                                </td>
                                <td>{{ customerCollateral?.marketPrice}}</td>
                                <td>
                                    <strong>Value:</strong>
                                </td>
                                <td>{{ customerCollateral?.amount | number:'1.2'}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Security Value:</strong>
                                </td>
                                <td>{{ customerCollateral?.sharesSecurityValue | number:'1.2'}}</td>
                                <td>
                                    <strong>Total Value</strong>
                                </td>
                                <td>{{customerCollateral?.shareValueAmountToUse}}</td>
                                <td>
                                    <strong></strong>
                                </td>
                                <td></td>
                            </tr>

                        </tbody>
                    </table>

                    <table *ngIf="collateralStock" class="table table-casa-information">
                        <tbody>

                            <tr>
                                <td>
                                    <strong>Share Quantity:</strong>
                                </td>
                                <td>{{ customerCollateral?.shareQuantity }}</td>
                                <td>
                                    <strong>Market Price:</strong>
                                </td>
                                <td>{{ customerCollateral?.marketPrice}}</td>
                                <td>
                                    <strong>Value:</strong>
                                </td>
                                <td>{{ customerCollateral?.amount | number:'1.2'}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Security Value:</strong>
                                </td>
                                <td>{{ customerCollateral?.sharesSecurityValue | number:'1.2'}}</td>
                                <td>
                                    <strong>Total Value</strong>
                                </td>
                                <td>{{customerCollateral?.shareValueAmountToUse}}</td>
                                <td>
                                    <strong></strong>
                                </td>
                                <td></td>
                            </tr>

                        </tbody>
                    </table>

                    <table *ngIf="collateralIspo" class="table table-casa-information">
                        <tbody>
                            <tr>
                                <td>
                                    <strong>Description:</strong>
                                </td>
                                <td>{{ customerCollateral?.description }}</td>
                                <td>
                                    <strong>Account Name To Debit:</strong>
                                </td>
                                <td>{{ customerCollateral?.accountNameToDebit }}</td>
                                <td>
                                    <strong>Account Number To Debit:</strong>
                                </td>
                                <td>{{ customerCollateral?.accountNumberToDebit }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Bank Name / Payer:</strong>
                                </td>
                                <td>{{ customerCollateral?.payer }}</td>
                                <td>
                                    <strong> Regular Payment Amount</strong>
                                </td>
                                <td>{{customerCollateral?.regularPaymentAmount | number :'1.2'}}</td>
                                <td>
                                    <strong>Interval</strong>
                                </td>
                                <td>{{customerCollateral?.interval}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Remark:</strong>
                                </td>
                                <td>{{ customerCollateral?.remark}}</td>
                            </tr>

                        </tbody>
                    </table>

                    <table *ngIf="domiciliationSalary" class="table table-casa-information">
                        <tbody>

                            <tr>
                                <td>
                                    <strong>Description:</strong>
                                </td>
                                <td>{{ customerCollateral?.description }}</td>
                                <td>
                                    <strong>Employer:</strong>
                                </td>
                                <td>{{ customerCollateral?.contractEmployer}}</td>
                                <td>
                                    <strong>Monthly Salary:</strong>
                                </td>
                                <td>{{ customerCollateral?.monthlySalary | number :'1.2'}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Other Annual Allowances:</strong>
                                </td>
                                <td>{{ customerCollateral?.annualAllowances | number :'1.2'}}</td>
                                <td>
                                    <strong> Total Annual Emolument</strong>
                                </td>
                                <td>{{customerCollateral?.annualEmolument | number :'1.2'}}</td>
                                <td>
                                    <strong>Account Number (Salary Domiciled)</strong>
                                </td>
                                <td>{{customerCollateral?.accountNumber }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Annual Salary:</strong>
                                </td>
                                <td>{{ customerCollateral?.annualSalary | number :'1.2'}}</td>
                                <td>
                                    <strong> Remark</strong>
                                </td>
                                <td>{{customerCollateral?.remark}}</td>
                            </tr>

                        </tbody>
                    </table>

                    <table *ngIf="domiciliationContract" class="table table-casa-information">
                        <tbody>

                            <tr>
                                <td>
                                    <strong>Description:</strong>
                                </td>
                                <td>{{ customerCollateral?.description }}</td>
                                <td>
                                    <strong>Contract Detail:</strong>
                                </td>
                                <td>{{ customerCollateral?.contractDetail }}</td>
                                <td>
                                    <strong>Contract Employer:</strong>
                                </td>
                                <td>{{ customerCollateral?.contractEmployer }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Total Contract Value:</strong>
                                </td>
                                <td>{{ customerCollateral?.contractValue | number :'1.2'}}</td>
                                <td>
                                    <strong> Outstanding Invoice Amount</strong>
                                </td>
                                <td>{{customerCollateral?.outstandingInvoiceAmount | number :'1.2'}}</td>
                                <td>
                                    <strong>Account Name To Debit</strong>
                                </td>
                                <td>{{customerCollateral?.accountNameToDebit }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Account Number To Debit:</strong>
                                </td>
                                <td>{{ customerCollateral?.accountNumberToDebit }}</td>
                                <td>
                                    <strong> Bank Name / Payer</strong>
                                </td>
                                <td>{{customerCollateral?.payer}}</td>
                                <td>
                                    <strong>Regular Payment Amount</strong>
                                </td>
                                <td>{{customerCollateral?.regularPaymentAmount | number:'1.2'}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Interval:</strong>
                                </td>
                                <td>{{ customerCollateral?.interval }}</td>
                                <td>
                                    <strong> Remark</strong>
                                </td>
                                <td>{{customerCollateral?.remark}}</td>
                            </tr>

                        </tbody>
                    </table>

                    <table *ngIf="indemnity" class="table table-casa-information">
                        <tbody>

                            <tr>
                                <td>
                                    <strong>Description:</strong>
                                </td>
                                <td>{{ customerCollateral?.description }}</td>
                                <td>
                                    <strong>Security Value:</strong>
                                </td>
                                <td>{{ customerCollateral?.securityValue | number:'1.2'}}</td>
                                <td>
                                    <strong>First Name:</strong>
                                </td>
                                <td>{{ customerCollateral?.firstName }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Middle Name:</strong>
                                </td>
                                <td>{{ customerCollateral?.middleName }}</td>
                                <td>
                                    <strong> Last Name</strong>
                                </td>
                                <td>{{customerCollateral?.lastName}}</td>
                                <td>
                                    <strong>BVN</strong>
                                </td>
                                <td>{{customerCollateral?.bvn }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Phone Number 1:</strong>
                                </td>
                                <td>{{ customerCollateral?.phoneNumber1 }}</td>
                                <td>
                                    <strong>Phone Number 2:</strong>
                                </td>
                                <td>{{ customerCollateral?.phoneNumber2 }}</td>
                                <td>
                                    <strong>Address</strong>
                                </td>
                                <td>{{customerCollateral?.address }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Tax Number:</strong>
                                </td>
                                <td>{{ customerCollateral?.taxNumber }}</td>
                                <td>
                                    <strong> Relationship</strong>
                                </td>
                                <td>{{customerCollateral?.relationship}}</td>
                                <td>
                                    <strong>Relationship Duration:</strong>
                                </td>
                                <td>{{ customerCollateral?.relationshipDuration }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong> Email</strong>
                                </td>
                                <td>{{customerCollateral?.emailAddress}}</td>
                                <td>
                                    <strong>Start Date:</strong>
                                </td>
                                <td>{{ customerCollateral?.cStartDate | date:"dd-MM-yyyy"}}</td>

                                <td>
                                    <strong> End Date</strong>
                                </td>
                                <td>{{customerCollateral?.endDate | date:"dd-MM-yyyy"}}</td>
                            </tr>

                            <tr>
                                <td>
                                    <strong>Remark:</strong>
                                </td>
                                <td>{{ customerCollateral?.remark }}</td>
                                <td>
                                    <strong> End Date</strong>
                                </td>
                                <td>{{customerCollateral?.endDate | date:"dd-MM-yyyy"}}</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="panel-footer">
                        <div class="row">
                            <div class="col-md-12">
                                <button type="button" (click)="showCollateralValuationForm()"
                                    class="btn btn-success pull-right">
                                    Add Collateral Valuation</button>
                                <button type="button" (click)="activeTabindex=0;" style="margin-right:5px"
                                    class="btn btn-danger pull-right">Back to List</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div>

                </div>
            </div>
            <!-- </div> -->
        </p-tabPanel>
        <p-tabPanel header="Collateral Valuations">
            <div class="panel-header">
                <div class="row">
                    <div class="col-md-12"> <button (click)="showCollateralValuationForm()" class="pull-right" pButton
                            type="button" label="Add New" icon="fa-plus"></button>
                    </div>
                </div>
            </div>
            <div class="row" style="padding:0 15px 0 15px;">
                <p-dataTable [responsive]="true" [value]="collateralValuations">
                    <p-column field="valuationName" header="Valuation Name">
                    </p-column>
                    <p-column field="valuationReason" header="Valuation Reason">
                    </p-column>
                    <p-column field="createdByName" header="Created By">
                    </p-column>
                    <!-- <p-column [style]="{'width':'150px'}" header="View">
                        <ng-template pTemplate="header"> </ng-template>
                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                            <div style="text-align:center">
                                <a (click)="viewValuerReport(d)" href="javascript:void(0)">View Valuer Report</a>
                            </div>
                        </ng-template>
                    </p-column> -->
                    <p-column [style]="{'width':'150px'}" header="View">
                        <ng-template pTemplate="header"> </ng-template>
                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                            <div style="text-align:center">
                                <a (click)="getValuationPrerequisites(d.collateralValuationId)"
                                    href="javascript:void(0)">Add / View Prerequisite(s)</a>
                            </div>
                        </ng-template>
                    </p-column>
                    <!-- <p-column [style]="{'width':'150px'}" header="View">
                        <ng-template pTemplate="header"> </ng-template>
                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                            <div style="text-align:center">
                                <a (click)="deleteValuation(d)" href="javascript:void(0)">Delete</a>
                            </div>
                        </ng-template>
                    </p-column> -->
                </p-dataTable>
            </div>
            <div class="panel-footer">
                <div class="row">
                    <div class="col-md-12">
                        <!-- <button type="button" (click)="activeTabindex=3" class="btn btn-success pull-right"
                            style="margin-left:5px">
                            Next</button> -->
                        <button type="button" (click)="activeTabindex=0;" style="margin-right:5px"
                            class="btn btn-danger pull-right">Back to List</button>
                    </div>
                </div>
            </div>
        </p-tabPanel>
        <p-tabPanel header="Valuation Prerequisites">
            <div class="panel-header">
                <div class="row">
                    <div class="col-md-12"> <button (click)="showNewValuationPrerequisite=true" class="pull-right"
                            pButton type="button" label="Add New" icon="fa-plus"></button>
                    </div>
                </div>
            </div>
            <div class="row" style="padding:0 15px 0 15px;">
                <!--<h6><strong>Collateral Visitation</strong></h6>-->
                <p-dataTable [responsive]="true" [value]="valuationPrerequisites">
                    <p-column field="valuationRequestType" header="Valuation Request Type">
                    </p-column>
                    <p-column field="valuationComment" header="Valuation Comment">
                    </p-column>
                    <p-column field="approvalStatus" header="Approval Status">
                    </p-column>
                    <p-column [style]="{'width':'150px'}" header="View">
                        <ng-template pTemplate="header"> </ng-template>
                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                            <div style="text-align:center">
                                <a (click)="populatePreDocumentUploadProperties(d)"
                                    href="javascript:void(0)">View/Upload Document</a>
                            </div>
                        </ng-template>
                    </p-column>
                    <p-column [style]="{'width':'150px'}" header="View">
                        <ng-template pTemplate="header"> </ng-template>
                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                            <div style="text-align:center">
                                <a (click)="goForApproval(d)" href="javascript:void(0)">Send for Approval</a>
                            </div>
                        </ng-template>
                    </p-column>
                </p-dataTable>
            </div>
            <div class="panel-footer">
                <div class="row">
                    <div class="col-md-12">
                        <!-- <button type="button" (click)="goForApproval()" class="btn btn-success pull-right" style="margin-left:5px"
                        [disabled]="valuationPrerequisites == undefined || valuationPrerequisites.length == 0">
                            Go For Approval</button> -->
                        <button type="button" (click)="activeTabindex=0;" style="margin-right:5px"
                            class="btn btn-danger pull-right">Back to List</button>
                    </div>
                </div>
            </div>
        </p-tabPanel>
        <p-tabPanel header="Collateral Valuations Request">
            <div class="row" style="padding:0 15px 0 15px;">
                <p-dataTable [responsive]="true" [value]="collateralValuationsRequestList" [rows]="10"
                    [paginator]="true">
                    <p-column field="customerName" header="Cusomer Name" [filter]="true" filterMatchMode="contains">
                    </p-column>
                    <p-column field="valuationName" header="Valuation Name" [filter]="true" filterMatchMode="contains">
                    </p-column>
                    <p-column field="valuationReason" header="Valuation Reason" [filter]="true"
                        filterMatchMode="contains">
                    </p-column>
                    <p-column field="valuationRequestType" header="Valuation Request Type" [filter]="true"
                        filterMatchMode="contains">
                    </p-column>
                    <p-column field="collateralCode" header="Collateral Code" [filter]="true"
                        filterMatchMode="contains">
                    </p-column>
                    <p-column field="collateralType" header="Collateral Type" [filter]="true"
                        filterMatchMode="contains">
                    </p-column>
                    <p-column field="approvalStatus" header="Approval Status" [filter]="true"
                        filterMatchMode="contains">
                    </p-column>
                    <p-column field="createdByName" header="Created By" [filter]="true" filterMatchMode="contains">
                    </p-column>
                    <p-column [style]="{'width':'100px'}" header="View">
                        <ng-template pTemplate="header"> </ng-template>
                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                            <div style="text-align:center">
                                <a (click)="getValuationPrerequisitesList(d.collateralValuationId)"
                                    href="javascript:void(0)">Prerequisite(s)</a>
                            </div>
                        </ng-template>
                    </p-column>
                </p-dataTable>
            </div>
            <div class="panel-footer">
                <div class="row">
                    <div class="col-md-12">
                        <button type="button" (click)="activeTabindex=0;" style="margin-right:5px"
                            class="btn btn-danger pull-right">Back to List</button>
                    </div>
                </div>
            </div>
        </p-tabPanel>
        <p-tabPanel header="Customer Information">
            <div class="panel header">
                <app-customer-information-detail [loadWithCustomerId]="searchCustomerId">
                </app-customer-information-detail>
                <div class="row">
                    <div class="col-md-12">
                        <button type="button" (click)="activeTabindex=0;" style="margin-right:5px"
                            class="btn btn-danger pull-right">Back to List</button>
                    </div>
                </div>
            </div>
        </p-tabPanel>

    </p-tabView>

</div>

<!--------------------------------------------- Modal -------------------------------------------->
<p-dialog [responsive]=true [(visible)]="showNewCollateralValuation" modal="modal" showEffect="fade" width="500">
    <div style="margin-bottom:0" class="panel panel-default">
        <div class="panel-heading">
            <h2 class="panel-title">
                New Collateral Valuation
            </h2>
        </div>
        <div class="panel-body" style="min-height:120px;">
            <form novalidate [formGroup]="collateralValuationForm" autocomplete="off">

                <div class="form-group">
                    <div class="form-group">
                        <label for="valuationName" class="control-label col-md-12">Valuation Name</label>
                        <div class="col-md-12">
                            <input type="text" name="valuationName" maxlength="50" formControlName="valuationName"
                                [ngClass]="collateralValuationForm.controls['valuationName'].valid ? 'valid-input' : 'required-input'"
                                id="valuationName" class="form-control" />
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="form-group">
                        <label for="valuationReason" class="control-label col-md-12">Valuation Reason</label>
                        <div class="col-md-12">
                            <textarea type="text" name="valuationReason" maxlength="50"
                                formControlName="valuationReason"
                                [ngClass]="collateralValuationForm.controls['valuationReason'].valid ? 'valid-input' : 'required-input'"
                                id="valuationReason" class="form-control"></textarea>
                        </div>
                    </div>
                </div>
            </form>

        </div>
        <div class="panel-footer">
            <div class="row">
                <div class="col-md-12">
                    <button type="button" (click)="addCollateralValuation(collateralValuationForm)"
                        [disabled]="collateralValuationForm.invalid" class="btn btn-success pull-right">Save and
                        Close</button>
                    <button type="button" (click)="showNewCollateralValuation=false" style="margin-right:5px"
                        class="btn btn-danger pull-right">Cancel</button>
                </div>
            </div>
        </div>
    </div>
</p-dialog>

<p-dialog [responsive]=true [(visible)]="showNewValuationPrerequisite" modal="modal" showEffect="fade" width="800">
    <div style="margin-bottom:0" class="panel panel-default">
        <div class="panel-heading">
            <h2 class="panel-title">
                New Valuation Prerequisite
            </h2>
        </div>
        <div class="panel-body" style="min-height:120px;">
            <form novalidate [formGroup]="valuationPrerequisiteForm" autocomplete="off">
                <div class="form-group">
                    <div class="form-group">
                        <label for="valuationReportId" class="control-label col-md-12">Document Type</label>
                        <div class="col-md-12">
                            <select ngModel name="valuationReportId" id="valuationReportId"
                                formControlName="valuationReportId" class="form-control"
                                [ngClass]="!valuationPrerequisiteForm.controls['valuationReportId'].valid ? 'required-input' : 'valid-input'">
                                <option value="">-- Select Document Type --</option>
                                <option *ngFor="let x of valuationReportTypes" [value]="x.valuationRequestTypeId">
                                    {{ x.valuationRequestType }}</option>
                                <!-- <option *ngFor="let x of collateralTypes" [value]="x.collateralTypeId"><strong>{{ x.collateralSubTypeName }}</strong> - {{ x.collateralTypeName }}</option> -->
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="form-group">
                        <label for="valuationComment" class="control-label col-md-12">Comment</label>
                        <div class="col-md-12">
                            <textarea type="text" name="valuationComment" maxlength="50"
                                formControlName="valuationComment"
                                [ngClass]="valuationPrerequisiteForm.controls['valuationComment'].valid ? 'valid-input' : 'required-input'"
                                id="valuationComment" class="form-control"></textarea>
                        </div>
                    </div>
                </div>
            </form>


        </div>
        <div class="panel-footer">
            <div class="row">
                <div class="col-md-12">
                    <button type="button" (click)="addValuationPrerequisite(valuationPrerequisiteForm)"
                        [disabled]="valuationPrerequisiteForm.invalid" class="btn btn-success pull-right">Save and
                        Close</button>
                    <button type="button" (click)="showNewValuationPrerequisite=false" style="margin-right:5px"
                        class="btn btn-danger pull-right">Cancel</button>
                </div>
            </div>
        </div>
    </div>
</p-dialog>

<!-- <p-dialog [responsive]=true [(visible)]="showDocumentUpload" modal="modal" showEffect="fade" width="700">
    <div class="panel-heading">
        <h2 class="panel-title">
            Document Upload
        </h2>
    </div>

    <div class="panel-body">
        <document-upload [reload]="reload" [operationId]="operationId" [customerId]="customerId"
            [targetId]="collateralValuationId" [deleteLink]="deleteLink" [showUploadForm]="true"
            [targetReferenceNumber]="00">
        </document-upload>
    </div>

    <div class="panel-footer">
        <div class="row">
            <div class="col-md-12">
                <button type="button" (click)="showDocumentUpload=false;" class="btn btn-success pull-right">
                    Close</button>
            </div>
        </div>
    </div>
</p-dialog> -->

<p-dialog [responsive]=true [(visible)]="showReport" modal="modal" showEffect="fade" width="600">
    <div class="panel-heading">
        <h2 class="panel-title">
            Valuer Report Information
        </h2>
    </div>
    <div class="row" style="padding:0 15px 0 15px;">
        <!--<h6><strong>Collateral Visitation</strong></h6>-->
        <p-dataTable [responsive]="true" [value]="valuerInfor">
            <p-column field="valuer" header="Valuer">
            </p-column>
            <p-column field="valuerComment" header="Valuer Comment">
            </p-column>
            <p-column field="valuationFee" header="Valuation Fee">
            </p-column>
            <p-column field="wht" header="WHT">
            </p-column>
            <p-column field="accountNumber" header="Account Number">
            </p-column>
        </p-dataTable>
    </div>
    <div class="panel-footer">
        <div class="row">
            <div class="col-md-12">
                <button type="button" (click)="showReport=false;" class="btn btn-success pull-right">
                    Close</button>
            </div>
        </div>
    </div>
</p-dialog>

<p-dialog [responsive]=true [(visible)]="showPrerequiteDocumentUpload" modal="modal" showEffect="fade" width="800">
    <div class="panel-body">
        <document-upload [reload]="reload" [operationId]="operationId" [customerId]="customerId" [targetId]="targetId"
            [deleteLink]="true" [showUploadForm]="true" [targetReferenceNumber]="00">
        </document-upload>
    </div>

    <div class="panel-footer">
        <div class="row">
            <div class="col-md-12">
                <button type="button" (click)="showPrerequiteDocumentUpload=false;" class="btn btn-success pull-right">
                    Close</button>
            </div>
        </div>
    </div>
</p-dialog>

<p-dialog [responsive]=true [(visible)]="showPrerequiteList" modal="modal" showEffect="fade" width="1000">
    <div class="panel-heading">
        <h6>
            <strong>Valuation Prerequisites</strong>
        </h6>
    </div>
    <div class="panel-body">
        <div class="row" style="padding:0 15px 0 15px;">
            <p-dataTable [responsive]="true" [value]="valuationPrerequisitesList">
                <p-column field="valuationRequestType" header="Valuation Request Type">
                </p-column>
                <p-column field="valuationComment" header="Valuation Comment">
                </p-column>
                <!-- <p-column field="approvalStatus" header="Approval Status">
                </p-column> -->
                <p-column [style]="{'width':'200px'}" header="View">
                    <ng-template let-row="rowData" let-i="rowIndex" pTemplate="body">
                        <div style="text-align:center">
                            <a (click)="populatePreDocumentUploadPropertiesList(row)" href="javascript:void(0)">View
                                Document</a>
                            <span style="padding:3px;">|</span>
                            <a (click)="getApprovalWorkFlowComments(row)" href="javascript:void(0)">Comments</a>
                        </div>
                    </ng-template>
                </p-column>
            </p-dataTable>
        </div>
    </div>

    <div class="panel-footer">
        <div class="row">
            <div class="col-md-12">
                <button type="button" (click)="showPrerequiteList=false;" class="btn btn-success pull-right">
                    Close</button>
            </div>
        </div>
    </div>
</p-dialog>

<p-dialog [responsive]="true" [(visible)]="showPrerequiteListDocumentUpload" modal="modal" showEffect="fade" width="1200" [contentStyle]="{'overflow-y': 'auto', 'overflow-x': 'hidden', 
'max-height': '80vh','min-height':'250px'}">
    <div class="panel-heading">
        <h6>
            <strong>Uploaded Documents</strong>
        </h6>
    </div>
    <div class="panel-body">
        <document-upload [reloadDocsOnly]="reloadDocsOnly" [operationId]="operationId" [customerId]="customerId"
            [targetId]="targetId" [deleteLink]="true" [showUploadForm]="true" [targetReferenceNumber]="00">
        </document-upload>
    </div>

    <div class="panel-footer">
        <div class="row">
            <div class="col-md-12">
                <button type="button" (click)="showPrerequiteListDocumentUpload=false;"
                    class="btn btn-success pull-right">
                    Close</button>
            </div>
        </div>
    </div>
</p-dialog>

<p-dialog [responsive]=true [(visible)]="showPrerequiteListComments" modal="modal" showEffect="fade" width="950">
    <div class="panel-body">
        <div class="panel panel-default">



            <div class="panel-body">
                <p-dataTable [value]="approvalWorkflowData" [paginator]="true" [rows]="5" [responsive]="true">
                    <p-column field="requestStaffName" header="Intiated By"></p-column>
                    <p-column field="requestApprovalLevel" header="Initiator Approval Level"></p-column>
                    <!-- <p-column field="responseStaffName" header="Directed To"></p-column> -->
                    <p-column field="responseApprovalLevel" header="Response Approval Level"></p-column>
                    <p-column field="approvalStatus" header="Approval Status"></p-column>
                    <p-column field="comment" header="Comment"></p-column>
                    <p-column field="systemArrivalDate" header="Date of Arrival">
                        <ng-template let-col let-apr="rowData" pTemplate="body">
                            {{apr[col.field] | date: 'medium'}}
                        </ng-template>
                    </p-column>
                    <p-column field="systemResponseDate" header="Date of Response">
                        <ng-template let-col let-apr="rowData" pTemplate="body">
                            {{apr[col.field] | date: 'medium' }}
                        </ng-template>
                    </p-column>
                </p-dataTable>
            </div>
        </div>
    </div>

    <div class="panel-footer">
        <div class="row">
            <div class="col-md-12">
                <button type="button" (click)="showPrerequiteListComments=false;" class="btn btn-success pull-right">
                    Close</button>
            </div>
        </div>
    </div>
</p-dialog>

<!-- <p-dialog [responsive]=true id="reccol-modal" modal="modal" showEffect="fade" [dismissableMask]=true [(visible)]="showCvForward" width="800" [contentStyle]="{'overflow':'auto','max-height':'700px'}">
    <form novalidate [formGroup]="cvForwardForm" (ngSubmit)="goForApproval()" autocomplete="off">
        <div class="panel panel-default">
            <div class="panel-heading">
                {{cvForwardTitle}}
            </div>
            <div class="panel-body">
                <div class="form-group">
                    <label for="comment" class="control-label col-md-12"><strong>Comment</strong></label>
                    <div class="col-md-12">
                        <textarea [ngClass]="cvForwardForm.controls['comment'].valid ? 'valid-input' : 'required-input'" 
                        class="form-control" formControlName="comment" name="comment" cols="15" rows="3"></textarea>
                    </div>
                    
                </div>
            </div>
            <div class="panel-footer">
                <div class="row">
                    <div class="col-md-12">
                        <button type="button" (click)="goForApproval()" [disabled]="cvForwardForm.invalid" class="btn btn-success pull-right">Submit</button>
                        <button type="button" (click)="showCvForward = false" style="margin-right:5px" class="btn btn-danger pull-right">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</p-dialog> -->